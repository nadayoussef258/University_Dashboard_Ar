<p-card class="m-0 p-2">
  @if (form) {
    <form method="post" class="grid grid-cols-12 md:gap-9" [formGroup]="form">
      @if (pageType !== "add" && !unitId) {
        <div class="flex gap-2 col-span-12 items-center">
          <p-toggleswitch
            [(ngModel)]="allowEditValue"
            [ngModelOptions]="{ standalone: true }"
            (onChange)="toggleEditBtn('unitId')"
          >
          </p-toggleswitch>
          <label class="font-medium text-sm">
            {{ "PAGES.UNIT_MEMBERS.FORM.QUESTION_ALLOW_EDIT" | translate }}
          </label>
        </div>
      }
      <!--  -->
      @if ((pageType !== "add" && unitId) || !unitId) {
        <div class="form-col">
          <label class="text-middle mb-2">
            {{ "PAGES.SHARE_FORM.UNIT" | translate }}
          </label>
          <app-prime-autocomplete
            [disabled]="pageType === 'edit' && !allowEdit()"
            [field]="'pageId'"
            [selectedOption]="selectedUnit"
            [suggestions]="filteredUnits"
            [formGroup]="form"
            (onSelect)="onUnitSelect($event)"
            [lazy]="false"
            (handleMethod)="getUnits($event)"
          ></app-prime-autocomplete>
        </div>
      }

      <div class="col-span-12 lg:col-span-3">
        <label class="text-middle mb-3">
          {{ "PAGES.SHARE_FORM.IS_LEADER.TITLE" | translate }}
        </label>
        <div class="flex gap-3 items-center">
          <p-toggleswitch formControlName="isLeader"></p-toggleswitch>
          <span
            class="border rounded-full font-semibold text-sm py-1 px-3 transition-all gap-2 duration-300 inline-flex items-center"
            [ngClass]="
              form.get('isLeader')?.value
                ? 'bg-blue-100 text-blue-700 border-blue-300'
                : 'bg-gray-100 text-gray-600 border-gray-300'
            "
          >
            <i
              class="text-base"
              [ngClass]="
                form.get('isLeader')?.value
                  ? 'pi pi-star text-blue-500'
                  : 'pi pi-user text-gray-500'
              "
            ></i>
            {{
              form.get("isLeader")?.value
                ? ("PAGES.SHARE_FORM.IS_LEADER.LEADER" | translate)
                : ("PAGES.SHARE_FORM.IS_LEADER.PERSON" | translate)
            }}
          </span>
        </div>
      </div>
    </form>
  }
</p-card>

@if (form) {
  <app-submit-buttons
    [isSubmitDisabled]="form.invalid"
    [submitBtnLabel]="pageType === 'add' ? 'ACTIONS.SUBMIT' : 'ACTIONS.SAVE'"
    (submit)="submit()"
    (cancel)="closeDialog()"
  />
}
